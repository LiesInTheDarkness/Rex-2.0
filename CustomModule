local CustomModule = {}

-- Toggles list
CustomModule.Toggles = {
    {
        Name = "Skibidi",
        Function = function(state)
            local player = game.Players.LocalPlayer
            if player and player.Character and player.Character:FindFirstChild("Humanoid") then
                local humanoid = player.Character.Humanoid
                if state then
                    humanoid.WalkSpeed = 50
                    print("Speed is now 50")
                else
                    humanoid.WalkSpeed = 16 -- Reset to default speed
                    print("Speed is now default")
                end
            end
        end
    }
}

-- Create GUI
function CustomModule:CreateGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "CustomModuleGui"
    screenGui.Parent = game:GetService("CoreGui")

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0.3, 0, 0.4, 0)
    mainFrame.Position = UDim2.new(0.35, 0, 0.3, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui

    local uiCorner = Instance.new("UICorner")
    uiCorner.CornerRadius = UDim.new(0.05, 0)
    uiCorner.Parent = mainFrame

    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0.15, 0)
    title.BackgroundTransparency = 1
    title.Text = "Custom Module"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextScaled = true
    title.Font = Enum.Font.GothamBold
    title.Parent = mainFrame

    local toggleContainer = Instance.new("Frame")
    toggleContainer.Size = UDim2.new(1, 0, 0.85, 0)
    toggleContainer.Position = UDim2.new(0, 0, 0.15, 0)
    toggleContainer.BackgroundTransparency = 1
    toggleContainer.Parent = mainFrame

    local uiListLayout = Instance.new("UIListLayout")
    uiListLayout.Padding = UDim.new(0, 10)
    uiListLayout.FillDirection = Enum.FillDirection.Vertical
    uiListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    uiListLayout.VerticalAlignment = Enum.VerticalAlignment.Top
    uiListLayout.Parent = toggleContainer

    for _, toggle in ipairs(self.Toggles) do
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(0.9, 0, 0, 40)
        button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        button.Text = toggle.Name
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.TextScaled = true
        button.Font = Enum.Font.Gotham
        button.Parent = toggleContainer

        local uiButtonCorner = Instance.new("UICorner")
        uiButtonCorner.CornerRadius = UDim.new(0.2, 0)
        uiButtonCorner.Parent = button

        local state = false
        button.MouseButton1Click:Connect(function()
            state = not state
            toggle.Function(state)
            button.BackgroundColor3 = state and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(50, 50, 50)
        end)
    end
end

return CustomModule