-- Main Script Loader

-- List of scripts to load
local scripts = {
    gui = "https://raw.githubusercontent.com/LiesInTheDarkness/Rex-2.0/refs/heads/main/MainGui",
    customModule = "https://raw.githubusercontent.com/LiesInTheDarkness/Rex-2.0/refs/heads/main/CustomModule",
}

-- Function to fetch and execute a script from a URL
local function loadScriptFromUrl(name, url)
    local success, scriptContent = pcall(function()
        return game:HttpGet(url)
    end)
    if success then
        local executeScript, loadError = loadstring(scriptContent)
        if executeScript then
            local successExec, execError = pcall(executeScript)
            if not successExec then
                warn("Failed to execute script: " .. name .. "\n" .. execError)
            end
        else
            warn("Failed to load script: " .. name .. "\n" .. loadError)
        end
    else
        warn("Failed to fetch script: " .. name)
    end
end

-- Load the GUI script first
loadScriptFromUrl("gui", scripts.gui)

-- Load the CustomModule script
local CustomModule = loadScriptFromUrl("customModule", scripts.customModule)

-- Ensure MainGui is compatible with CustomModule
if CustomModule then
    -- Example of how to add a toggle to the GUI from CustomModule
    for _, toggle in ipairs(CustomModule.Toggles) do
        if script.Parent:FindFirstChild("MainGui") then
            local MainGui = require(script.Parent.MainGui)
            MainGui.createToggleButton(toggle)
        end
    end
end