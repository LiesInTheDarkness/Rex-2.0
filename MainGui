-- MainGui Script

local playerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create the ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui
screenGui.Name = "Rex 2.0"
screenGui.ResetOnSpawn = false

-- Create the main frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- Warning Notification System
shared.GuiLibrary = shared.GuiLibrary or {}

shared.GuiLibrary.createwarning = function(title, text, delay, bgColor)
    bgColor = bgColor or Color3.fromRGB(236, 129, 44) -- Default to orange
    if playerGui:FindFirstChild("WarningNotification") then
        playerGui.WarningNotification:Destroy()
    end

    local warningGui = Instance.new("ScreenGui")
    warningGui.Name = "WarningNotification"
    warningGui.Parent = playerGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 300, 0, 100)
    frame.Position = UDim2.new(0.5, -150, 0.5, -50)
    frame.AnchorPoint = Vector2.new(0.5, 0.5)
    frame.BackgroundColor3 = bgColor
    frame.BorderSizePixel = 0
    frame.Parent = warningGui

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0.4, 0)
    titleLabel.Position = UDim2.new(0, 0, 0, 10)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title
    titleLabel.Font = Enum.Font.SourceSansBold
    titleLabel.TextSize = 20
    titleLabel.TextColor3 = Color3.new(1, 1, 1)
    titleLabel.Parent = frame

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 0.6, 0)
    textLabel.Position = UDim2.new(0, 0, 0.4, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = text
    textLabel.Font = Enum.Font.SourceSans
    textLabel.TextSize = 16
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    textLabel.TextWrapped = true
    textLabel.Parent = frame

    -- Automatically remove the warning after the delay
    task.delay(delay, function()
        warningGui:Destroy()
    end)
end

-- Function to create a button
local function createButton(buttonData)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, 10)
    button.Text = buttonData.Name
    button.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.SourceSans
    button.TextSize = 16
    button.Parent = mainFrame

    button.MouseButton1Click:Connect(buttonData.Function)
end

-- Function to create a toggle
local function createToggle(toggleData)
    local toggle = Instance.new("TextButton")
    toggle.Size = UDim2.new(1, -20, 0, 30)
    toggle.Position = UDim2.new(0, 10, 0, 50)
    toggle.Text = toggleData.Name .. ": OFF"
    toggle.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggle.Font = Enum.Font.SourceSans
    toggle.TextSize = 16
    toggle.Parent = mainFrame

    local state = false
    toggle.MouseButton1Click:Connect(function()
        state = not state
        toggle.Text = toggleData.Name .. ": " .. (state and "ON" or "OFF")
        toggleData.Function(state)
    end)
end

-- Load CustomModule
local success, customModule = pcall(function()
    return loadstring(game:HttpGet("https://raw.githubusercontent.com/LiesInTheDarkness/Rex-2.0/refs/heads/main/CustomModule"))()
end)

if success then
    for _, buttonData in ipairs(customModule.Buttons) do
        createButton(buttonData)
    end

    for _, toggleData in ipairs(customModule.Toggles) do
        createToggle(toggleData)
    end
else
    warn("Failed to load CustomModule!")
end